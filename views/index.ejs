<!DOCTYPE html>
<html lang="en">

<head>
  <title>HexEmpireAI</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css" type="text/css">
  <link rel="stylesheet" href="/css/game.css" type="text/css">
  <script src="/js/jquery-3.5.1.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>
  <div class="main-container">
    <!-- Header & Controls -->
    <div class="header">
      <div class="form-group">
        <label for="mapNumberInput">Map #</label>
        <input type="text" class="form-control" id="mapNumberInput" placeholder="e.g., 999999">
      </div>
      <div class="btn-group-custom">
        <button type="button" class="btn btn-primary" id="changeMapButton">Change</button>
        <button type="button" class="btn btn-primary" id="randomMapButton">Random</button>
        <button type="button" class="btn btn-success" id="startBattleButton">Start</button>
      </div>
    </div>

    <!-- Map Container -->
    <div class="map-container">
      <div class="status-bar">
        <div class="status-item">
          <span class="status-label">Map:</span>
          <span class="status-value" id="mapNumberStatus">-</span>
        </div>
        <div class="status-item">
          <span class="status-label">Turn:</span>
          <span class="status-value" id="turnStatus">1</span>
        </div>
      </div>
      <!-- Hidden element for backward compatibility -->
      <div id="mapStatus" style="display: none;"><b>Map</b> , <b>Turn</b> 1</div>
      <canvas id="map" width="800" height="600"></canvas>

      <!-- Replay Controls (shown after game ends) -->
      <div class="replay-controls-inline" id="replayControlsInline" style="display: none;">
        <div class="replay-controls">
          <button class="btn btn-sm btn-secondary" id="replayPrevBtn">⏮ Prev</button>
          <button class="btn btn-sm btn-primary" id="replayPlayBtn">▶ Play</button>
          <button class="btn btn-sm btn-secondary" id="replayNextBtn">Next ⏭</button>
          <button class="btn btn-sm btn-outline-secondary" id="replayExitBtn" style="display: none;">Exit
            Replay</button>
          <span class="replay-turn-display" id="replayTurnDisplay">0 / 0</span>
          <input type="range" class="replay-slider" id="replaySlider" min="0" max="0" value="0">
        </div>
      </div>
    </div>

    <!-- Combined Tabs for Game Log and Statistics -->
    <div class="info-panel-container">
      <div class="info-panel-tabs">
        <button class="info-panel-tab active" data-panel="log">
          <span>Game Log</span>
          <span class="badge" id="logBadge">0</span>
        </button>
        <button class="info-panel-tab" data-panel="stats">
          <span>Statistics</span>
        </button>
      </div>
      
      <!-- Game Log Panel -->
      <div id="infoPanelLog" class="info-panel-content active">
        <div class="log-filters">
          <input type="text" class="log-search" id="logSearch" placeholder="Search log...">
          <button class="log-filter-btn active" data-filter="all">All</button>
          <button class="log-filter-btn" data-filter="conquest">Conquest</button>
          <button class="log-filter-btn" data-filter="capture">Capture</button>
          <button class="log-filter-btn" data-filter="move">Moves</button>
          <button class="log-filter-btn" data-filter="annex">Annex</button>
        </div>
        <div id="gamelog"></div>
      </div>

      <!-- Statistics Panel -->
      <div id="infoPanelStats" class="info-panel-content">
        <div class="stats-content">
          <div class="stats-tabs">
            <button class="stats-tab active" data-tab="cities">Cities & Ports</button>
            <button class="stats-tab" data-tab="army">Army Size</button>
            <button class="stats-tab" data-tab="territory">Territory</button>
            <button class="stats-tab" data-tab="morale">Morale</button>
          </div>
          <div id="statsChartCities" class="stats-chart-container">
            <canvas id="citiesChart"></canvas>
          </div>
          <div id="statsChartArmy" class="stats-chart-container" style="display: none;">
            <canvas id="armyChart"></canvas>
          </div>
          <div id="statsChartTerritory" class="stats-chart-container" style="display: none;">
            <canvas id="territoryChart"></canvas>
          </div>
          <div id="statsChartMorale" class="stats-chart-container" style="display: none;">
            <canvas id="moraleChart"></canvas>
          </div>
        </div>
      </div>
    </div>

  </div>

  <script src="/game/Main.js" type="module"></script>
</body>

</html>